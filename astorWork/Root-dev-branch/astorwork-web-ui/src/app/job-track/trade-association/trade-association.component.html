<link href="https://unpkg.com/bootstrap-css-only@4.1.1/css/bootstrap.min.css" rel="stylesheet">
<link href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.css" rel="stylesheet">
<link href="https://unpkg.com/angular-calendar@0.26.4/css/angular-calendar.css" rel="stylesheet">
<link href="https://unpkg.com/flatpickr@4.5.2/dist/flatpickr.css" rel="stylesheet">

<ng-template #modalContent let-close="close">
  <div class="modal-header">
    <h5 class="modal-title">Event action occurred</h5>
    <button type="button" class="close" (click)="close()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div>
      Action:
      <pre>{{ modalData?.action }}</pre>
    </div>
    <div>
      EventA: 
      <pre>{{ modalData?.event | json }}</pre>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-secondary" (click)="close()">OK</button>
  </div>
</ng-template>

<!-- <br><br><br> -->

<h3>
  Trade Associations
  <!-- <button
    class="btn btn-primary pull-right"
    style="margin-left: 20px"
    (click)="addEvent()">
    Add Job Association
  </button>
  <button
    class="btn btn-primary pull-right"
    style="margin-left: 20px">
    Import Checklist
  </button> -->

  <!-- <div class="clearfix"></div> -->
</h3>
<app-common-loading *ngIf="isLoading"></app-common-loading>
<div [hidden]="isLoading">
  <table mat-table [dataSource]="tradesDataSource" class="mat-elevation-z8" matSort>
    <ng-container matColumnDef="name" style="max-width:20px">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Job</th>
      <td mat-cell *matCellDef="let element"> {{element.name}} </td>
    </ng-container>
    <ng-container matColumnDef="materialTypes" style="width:40%">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Module Types</th>
      <td mat-cell *matCellDef="let element">
        <mat-select matInput placeholder="Module Types" [(value)] = "element.materialTypes" multiple>
          <mat-option *ngFor="let materialType of materialTypes" [value]='materialType.name' [disabled] = "element.jobStartedMaterialTypes.indexOf(' ' + materialType.name + ' ') > -1">
            {{ materialType.name }}
          </mat-option>
        </mat-select>
      </td>
    </ng-container>
    <ng-container matColumnDef="checklistItems" style="width:40%">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Checklist Items</th>
      <td mat-cell *matCellDef="let element">
        <mat-select matInput placeholder="Checklist Items" [(value)] = "element.checklistItems" multiple> 
          <mat-option *ngFor="let checklistItem of element.checklistItems" [disabled]="true" [(value)]='checklistItem' >
            {{ checklistItem }}
          </mat-option>
        </mat-select>
      </td>
    </ng-container>
    
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"   id="row_{{row.id}}"></tr>
  </table>  
  <mat-paginator #paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 20]">
  </mat-paginator>

  <!-- <button
      class="btn btn-primary pull-right"
      style="margin-right: 20px"
      (click)="onSave()">
      Save
  </button> -->
 
  <div fxLayout="row" fxLayoutAlign="space-evenly end" fxLayoutGap="20px" style="margin-top:15px">
    <div class="button-row">
      <button mat-raised-button color="primary" (click)="onSave()">Save</button>
    </div>
  </div>

</div>

<!--
<table class="table table-bordered" style="background-color: white">
  <thead>
    <tr>
      <th>Trade</th>
      <th style="vertical-align:bottom">
        Material Type
        <button
          mat-fab class="top-right-fab-button button"
          style="margin-left: 20px;float:right;"
          (click)="addJob()"><mat-icon>add</mat-icon>
        </button>
        
        <input
          type="text"
          class="form-control"
          style="float: right; width: 250px;"
          [(ngModel)]="newTrade"
          (keyup)="refresh.next()">
      </th>
      <th>Checklist Item</th>
      <th>Remove</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let event of events; let index = index">
      <td>
          <mat-form-field style="width:100%">
              <mat-select matInput [value]="event.materialTrades" multiple>
                  <mat-option *ngFor="let trade of event.trades" [value]='trade.value'>
                      {{ trade.viewValue }}
                  </mat-option>
              </mat-select>
          </mat-form-field>
      </td>
      
      <td>
        <input
          type="text"
          class="form-control"
          [(ngModel)]="event.title"
          (keyup)="refresh.next()">
      </td>
      <td></td>
      <td>
        <mat-icon 
          (click)="events.splice(index, 1); refresh.next()">delete</mat-icon>
      </td>
    </tr>
  </tbody>
</table>
-->


